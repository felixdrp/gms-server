{"version":3,"sources":["process-topic-list.js"],"names":[],"mappings":";;;;;;;;;;;;;;;uEAgBA;QACM,WACA,OACA;;;;;AAFA,wBAAY,+BAAsB,eAAe,KAAf;AAClC,oBAAQ;;mBACK,UAAU,OAAV;;;AAAb;;AACJ,iBAAK,GAAL,CACE,UAAC,GAAD,EAAS;AACP,kBAAI,CAAC,MAAM,IAAI,KAAJ,CAAP,EAAmB;AACrB,sBAAM,IAAI,KAAJ,CAAN,GAAmB,EAAE,OAAO,EAAP,EAArB,CADqB;eAAvB;AAGA,oBAAM,IAAI,KAAJ,CAAN,CAAiB,KAAjB,CAAuB,IAAvB,CAA4B,IAAI,IAAJ,CAA5B,CAJO;aAAT,CADF;;6CASO;;;;;;;;GAbT;kBAAe;;;;;;uEAgBf;QACM,WACA,OACA;;;;;AAFA,wBAAY,+BAAsB,eAAe,IAAf;AAClC,oBAAQ;;mBACK,UAAU,OAAV;;;AAAb;;AACJ,iBAAK,GAAL,CACE,UAAC,GAAD,EAAS;AACP,kBAAI,CAAC,MAAM,IAAI,KAAJ,CAAP,EAAmB;AACrB,sBAAM,IAAI,KAAJ,CAAN,GAAmB;AACjB,wBAAM,EAAN;AACA,6BAAW,EAAX;iBAFF,CADqB;eAAvB;AAMA,oBAAM,IAAI,KAAJ,CAAN,CAAiB,IAAjB,CAAsB,IAAtB,CAA2B,IAAI,GAAJ,CAA3B,CAPO;AAQP,oBAAM,IAAI,KAAJ,CAAN,CAAiB,SAAjB,CAA2B,IAA3B,CAAgC,IAAI,QAAJ,CAAhC,CARO;aAAT,CADF;;8CAaO;;;;;;;;GAjBT;kBAAe;;;;;;uEAoBf;QACM,WACA,OACA;;;;;AAFA,wBAAY,+BAAsB,eAAe,MAAf;AAClC,oBAAQ;;mBACK,UAAU,OAAV;;;AAAb;;AACJ,iBAAK,GAAL,CACE,UAAC,GAAD,EAAS;AACP,kBAAI,CAAC,MAAM,IAAI,KAAJ,CAAP,EAAmB;AACrB,sBAAM,IAAI,KAAJ,CAAN,GAAmB,EAAE,QAAQ,EAAR,EAArB,CADqB;eAAvB;AAGA,oBAAM,IAAI,KAAJ,CAAN,CAAiB,MAAjB,CAAwB,IAAxB,CAA6B,IAAI,QAAJ,CAA7B,CAJO;aAAT,CADF;;8CASO;;;;;;;;GAbT;kBAAe;;;;;AApDf;;;;AACA;;;;;;AAEA,IAAI,KAAK,QAAQ,IAAR,CAAL;;AAEJ,IAAM,mBAAmB,6BAAnB;;AAEN,IAAM,iBAAiB;AACrB,SAAO,mBAAmB,sCAAnB;AACP,QAAM,mBAAmB,2BAAnB;AACN,UAAQ,mBAAmB,6BAAnB;CAHJ;;AAMN,IAAM,iBAAiB,yCAAjB;;AAiBL;;AAoBA;;AAgBA;;AAED,2DAAC;MAGK;;;;;;AADJ,kBAAQ,IAAR,CAAa,iBAAb;yBAEE,oBAAU,MAAV,CAAkB,EAAlB;;iBACkB;;;;sCAAjB;;iBACiB;;;;sCAAjB;;iBACiB;;;;AAJhB,mCAID;;AAEH,kBAAQ,OAAR,CAAgB,iBAAhB;;;;;;AAMA,oBAAU,QAAV;AACA,oBAAU,OAAV;AACA,oBAAU,IAAV;;;;;;AAMA,aAAG,SAAH,CAAa,cAAb,EAA6B,yBAAgB,EAAE,QAAQ,SAAR,EAAlB,EAAwC,IAAxC,EAA8C,CAA9C,CAA7B,EAA+E,UAAS,GAAT,EAAc;AACzF,gBAAG,GAAH,EAAQ;AACN,sBAAQ,GAAR,CAAY,GAAZ,EADM;aAAR,MAEO;AACL,sBAAQ,GAAR,CAAY,mBAAmB,cAAnB,CAAZ,CADK;aAFP;WAD2E,CAA/E;;;;;;;;CAvBD,EAAD;;;AAkCA,QAAQ,IAAR,CAAa,OAAb,CAAqB,UAAU,GAAV,EAAe,KAAf,EAAsB,KAAtB,EAA6B;AAChD,UAAQ,GAAR,CAAY,QAAQ,IAAR,GAAe,GAAf,CAAZ,CADgD;CAA7B,CAArB","file":"process-topic-list.js","sourcesContent":["import Immutable from 'immutable'\nimport ProcessTopicFile from './process-topic-file';\n\nvar fs = require('fs');\n\nconst PATH_TOPIC_FILES = '/home/rp/Downloads/forLong/';\n\nconst topicFilesPath = {\n  WORDS: PATH_TOPIC_FILES + 'news_representative_words_output.txt',\n  NEWS: PATH_TOPIC_FILES + 'news_documents_output.txt',\n  TWEETS: PATH_TOPIC_FILES + 'tweets_documents_output.txt',\n};\n\nconst outputFilename = './src/graphql/data-topic-list-real.json';\n\n\nasync function processWords() {\n  var topicFile = new ProcessTopicFile( topicFilesPath.WORDS );\n  let final = {};\n  let data = await topicFile.getData();\n  data.map(\n    (obj) => {\n      if (!final[obj.topic]) {\n        final[obj.topic] = { words: [] };\n      }\n      final[obj.topic].words.push(obj.word)\n    }\n  )\n  // console.log( { topics: final } );\n  return final;\n};\n\nasync function processNews() {\n  let topicFile = new ProcessTopicFile( topicFilesPath.NEWS );\n  let final = {};\n  let data = await topicFile.getData();\n  data.map(\n    (obj) => {\n      if (!final[obj.topic]) {\n        final[obj.topic] = {\n          urls: [],\n          documents: [],\n        };\n      }\n      final[obj.topic].urls.push(obj.url);\n      final[obj.topic].documents.push(obj.document);\n    }\n  )\n  // console.log( { topics: final } );\n  return final;\n};\n\nasync function processTweets() {\n  let topicFile = new ProcessTopicFile( topicFilesPath.TWEETS );\n  let final = {};\n  let data = await topicFile.getData();\n  data.map(\n    (obj) => {\n      if (!final[obj.topic]) {\n        final[obj.topic] = { tweets: [] };\n      }\n      final[obj.topic].tweets.push(obj.document)\n    }\n  )\n  // console.log( { topics: final } );\n  return final;\n};\n\n(async () => {\n\n  console.time('Processin Files');\n  let topicList = (\n    Immutable.fromJS( {} )\n    .mergeDeep( await processWords() )\n    .mergeDeep( await processNews() )\n    .mergeDeep( await processTweets() )\n  );\n  console.timeEnd('Processin Files');\n\n  // console.log(\n  //   topicList\n  // )\n\n  topicList.toObject()\n  topicList.toArray()\n  topicList.toJS()\n\n  // console.log(\n  //   JSON.stringify( topicList , null, 2 )\n  // )\n\n  fs.writeFile(outputFilename, JSON.stringify( { topics: topicList } , null, 2), function(err) {\n      if(err) {\n        console.log(err);\n      } else {\n        console.log(\"JSON saved to \" + outputFilename);\n      }\n  });\n\n})();\n\n// print process.argv\nprocess.argv.forEach(function (val, index, array) {\n  console.log(index + ': ' + val);\n});\n"],"sourceRoot":"/source/"}